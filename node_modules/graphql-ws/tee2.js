var streamBuffers = require('stream-buffers');

var tee = new streamBuffers.WritableStreamBuffer({
    initialSize: (100 * 1024),   // start at 100 kilobytes. 
    incrementAmount: (10 * 1024) // grow by 10 kilobytes each time buffer overflows. 
});
process.stdin.pipe(tee);

function readall() {
	tee.once('readable', function(data) {
			var chunk;
			setTimeout(() => {
					if((chunk = tee.read(3)) !== null) {
					console.log(chunk);
					}
					readall();
					}, 1000);
			});
}

readall();

setInterval(()=>{}, 1000);
