"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const iterall_1 = require("iterall");
function createIterableFromPromise(promise) {
    let isResolved = false;
    return promise.then((value) => {
        if (iterall_1.isAsyncIterable(value)) {
            return value;
        }
        return {
            next() {
                if (!isResolved) {
                    isResolved = true;
                    return Promise.resolve({ value, done: false });
                }
                return Promise.resolve({ value: undefined, done: true });
            },
            return() {
                isResolved = true;
                return Promise.resolve({ value: undefined, done: true });
            },
            throw(e) {
                isResolved = true;
                return Promise.reject(e);
            },
            [iterall_1.$$asyncIterator]() {
                return this;
            },
        };
    });
}
exports.createIterableFromPromise = createIterableFromPromise;
//# sourceMappingURL=promise-to-iterable.js.map